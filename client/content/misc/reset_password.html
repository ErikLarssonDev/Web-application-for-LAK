<!doctype html>
<html lang="en">
  
  <body>
      <div class="container-sm">
          <div class="row">
              <div class="col">
                <h1>Logga</h1>
              </div>
          </div>
            <div class="row">
                <div class="col">
                    <div class="container">
                        <form id="form">
                            <div class="form-group">
                                <div class="form-group">
                                    <label for="pw1">Nytt lösenord</label>
                                    <input type="password" class="form-control" id="pw1">
                                </div>
                                <div class="form-group">
                                    <label for="pw2">Bekräfta lösenord</label>
                                    <input type="password" class="form-control" id="pw2">
                                </div>
                            </div>
                            <button type="submit" class="btn btn-primary">Skicka</button>
                        </form>
                    </div>
                </div>
            </div>
      </div>
    
    <script>
        $('#form').submit(
            function (event) {
                event.preventDefault();
                const pw1 = $('#pw1').val();
                const pw2 = $('#pw2').val();
                
                if (pw1 == pw2) {
                    $.ajax({
                        type: "POST",
                        url: host + "reset-password" + window.location.search,
                        contentType: "application/json",
                        data: JSON.stringify({
                            "new_password": pw1
                        }),
                        contentType: "application/json",
                        success: function () {
                            window.location.replace("http://localhost:3000/");
                        },
                        error: function () {
                            alert("Lösenord kunde inte ändras.");
                        }
                    })
                } else {
                    alert("Lösenorden matchar inte varandra.");
                }
            }
        )
    </script>
  </body>
</html>